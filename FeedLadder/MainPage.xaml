<phone:PhoneApplicationPage
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity" xmlns:ec="clr-namespace:Microsoft.Expression.Interactivity.Core;assembly=Microsoft.Expression.Interactions" 
    x:Class="FeedLadder.MainPage"
    mc:Ignorable="d" d:DesignWidth="480" d:DesignHeight="768" 
    SupportedOrientations="Portrait" Orientation="Portrait"
    shell:SystemTray.IsVisible="True" Loaded="PhoneApplicationPage_Loaded"
    Language="ja-JP">

    <phone:PhoneApplicationPage.Resources>
        <!--④ リストボックスの1記事のデザインを設定-->

        <!--from http://msdn.microsoft.com/ja-jp/library/windowsphone/develop/jj244365(v=vs.105).aspx-->
        <DataTemplate x:Key="SubscriptionGroupHeaderTemplate">
            <Border Background="Transparent" Padding="5">
                <Border BorderBrush="{StaticResource PhoneAccentBrush}" 
        			BorderThickness="2" Width="340" Height="62" Margin="-5,0,0,0" HorizontalAlignment="Left">
                    <TextBlock Text="{Binding Key}" Foreground="{StaticResource PhoneAccentBrush}" FontSize="48" Padding="6" 
        				FontFamily="{StaticResource PhoneFontFamilySemiLight}" HorizontalAlignment="Left" VerticalAlignment="Center"/>
                </Border>
            </Border>
        </DataTemplate>

        <DataTemplate x:Key="SubscriptionItemTemplate">
            <Grid>
                <StackPanel Margin="0,10,0,10" Orientation="Horizontal" Grid.ColumnSpan="2">
                    <TextBlock x:Name="textBlock" Text="{Binding Title}" Margin="0" Style="{StaticResource PhoneTextTitle2Style}" TextWrapping="Wrap" HorizontalAlignment="Left" Width="340" VerticalAlignment="Center" Foreground="{StaticResource PhoneForegroundBrush}"/>
                    <Border x:Name="border" BorderThickness="2" HorizontalAlignment="Right" Height="70" VerticalAlignment="Center" Width="70" Background="{StaticResource PhoneAccentBrush}">
                        <TextBlock x:Name="textBlock1" Text="{Binding UnreadCount}" HorizontalAlignment="Center" Margin="0" Style="{StaticResource PhoneTextLargeStyle}" TextWrapping="Wrap" VerticalAlignment="Center" Foreground="{StaticResource PhoneForegroundBrush}"/>
                    </Border>
                    <!--<TextBlock Text="{Binding Title}" TextWrapping="Wrap" HorizontalAlignment="Left" VerticalAlignment="Center" Width="310" FontFamily="Portable User Interface" />-->
                </StackPanel>
            </Grid>
        </DataTemplate>

        <phone:JumpListItemBackgroundConverter x:Key="BackgroundConverter"/>
        <phone:JumpListItemForegroundConverter x:Key="ForegroundConverter"/>
        <Style x:Key="SubscriptionJumpListStyle" TargetType="phone:LongListSelector">
            <Setter Property="GridCellSize"  Value="62,460"/>
            <Setter Property="LayoutMode" Value="List" />
            <Setter Property="ItemTemplate">
                <Setter.Value>
                    <DataTemplate>
                        <Border Background="{Binding Converter={StaticResource BackgroundConverter}}" Width="460" Height="80" Margin="6" >
                            <TextBlock Text="{Binding Key}" FontSize="48" Padding="6" 
        						Foreground="{Binding Converter={StaticResource ForegroundConverter}}" VerticalAlignment="Center"/>
                        </Border>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style>

    </phone:PhoneApplicationPage.Resources>

    <phone:PhoneApplicationPage.FontFamily>
        <StaticResource ResourceKey="PhoneFontFamilyNormal"/>
    </phone:PhoneApplicationPage.FontFamily>
    <phone:PhoneApplicationPage.FontSize>
        <StaticResource ResourceKey="PhoneFontSizeMediumLarge"/>
    </phone:PhoneApplicationPage.FontSize>

    <shell:SystemTray.ProgressIndicator>
        <shell:ProgressIndicator x:Name="progressIndicator" IsIndeterminate="True" IsVisible="False"  />
    </shell:SystemTray.ProgressIndicator>

    <!--⑦ ApplicationBar の使用法を示すサンプル コード-->
    <phone:PhoneApplicationPage.ApplicationBar>
        <shell:ApplicationBar IsVisible="True" IsMenuEnabled="True" Mode="Default">
            <shell:ApplicationBar.MenuItems>
                <shell:ApplicationBarMenuItem Text="settings" Click="abmSetting_Click"/>
                <shell:ApplicationBarMenuItem Text="about" Click="abmAbout_Click" />
            </shell:ApplicationBar.MenuItems>
            <shell:ApplicationBarIconButton IconUri="/Assets/AppBar/appbar.refresh.rest.png" Text="refresh" Click="abmRefresh_Click"/>
        </shell:ApplicationBar>
    </phone:PhoneApplicationPage.ApplicationBar>

    <!--LayoutRoot は、すべてのページ コンテンツが配置されるルート グリッドです-->
    <Grid x:Name="LayoutRoot">

        <!--ピボット コントロール-->
        <phone:Pivot x:Name="RootPivot" SelectionChanged="RootPivot_SelectionChanged" >
            <!--modify pivot header from http://od-10.blogspot.jp/2011/12/panoramapivot.html-->
            <phone:Pivot.Title>
                <ContentControl>
                    <TextBlock Text="FEEDLADDER" Margin="0" Style="{StaticResource PhoneTextNormalStyle}"/>
                </ContentControl>
            </phone:Pivot.Title>

            <!--unread-->
            <phone:PivotItem>
                <phone:PivotItem.Header>
                    <ContentControl>
                        <TextBlock Text="unread" Margin="0,7,0,0" Style="{StaticResource PhoneTextTitle1Style}" FontSize="56" />
                    </ContentControl>
                </phone:PivotItem.Header>
                <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
                    <TextBlock x:Name="LoginLabel" Margin="0" TextWrapping="Wrap" Text="Please set Username and Password in Setting page" Visibility="Collapsed" Foreground="Gray" Style="{StaticResource PhoneTextLargeStyle}" />
                    <TextBlock x:Name="NoItemLabel" Margin="0" TextWrapping="Wrap" Text="No Item" Visibility="Collapsed" Foreground="Gray" Style="{StaticResource PhoneTextLargeStyle}" />
                    <phone:LongListSelector x:Name="subscriptionListResult" 
						GroupHeaderTemplate="{StaticResource SubscriptionGroupHeaderTemplate}"
						ItemTemplate="{StaticResource SubscriptionItemTemplate}" 
						JumpListStyle="{StaticResource SubscriptionJumpListStyle}"
						IsGroupingEnabled="true"
						Tap="subscriptionListResult_Tap" 
						Visibility="Collapsed"/>
                </Grid>
            </phone:PivotItem>

            <!--pinned-->
            <phone:PivotItem x:Name="PinItem" >
                <phone:PivotItem.Header>
                    <ContentControl>
                        <TextBlock Text="pinned" Margin="0,7,0,0" Style="{StaticResource PhoneTextTitle1Style}" FontSize="56" />
                    </ContentControl>
                </phone:PivotItem.Header>
                <Grid Grid.Row="1" Margin="12,0,12,0">
                    <TextBlock x:Name="PinLoginLabel" Margin="0" TextWrapping="Wrap" Text="Please set Username and Password in Setting page" Visibility="Collapsed" Foreground="Gray" Style="{StaticResource PhoneTextLargeStyle}" />
                    <TextBlock x:Name="PinNoItemLabel" Margin="0" TextWrapping="Wrap" Text="No Item" Visibility="Collapsed" Foreground="Gray" Style="{StaticResource PhoneTextLargeStyle}" />
                    <phone:LongListSelector x:Name="PinList" Margin="0,-10,0,10" Tap="PinList_Tap">
                        <phone:LongListSelector.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Margin="-12,0,0,17">
                                    <TextBlock Text="{Binding Title}" TextWrapping="NoWrap" Style="{StaticResource PhoneTextExtraLargeStyle}"/>
                                </StackPanel>
                            </DataTemplate>
                        </phone:LongListSelector.ItemTemplate>
                    </phone:LongListSelector>
                </Grid>
            </phone:PivotItem>
        </phone:Pivot>

    </Grid>

</phone:PhoneApplicationPage>